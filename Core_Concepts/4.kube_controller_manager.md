# kube controller manager

### 1. kube controller manager ê°œìš”

- kube controller managerëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ë‹¤ì–‘í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ê´€ë¦¬
  - ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì¼ë ¨ì˜ ì±…ì„ì„ ê°€ì§€ëŠ” ì„ ë°• ë‚´ì˜ ì‚¬ë¬´ì‹¤ ë˜ëŠ” ë¶€ì„œì™€ ê°™ìŒ
- ì‹œìŠ¤í…œ ë‚´ì˜ ë‹¤ì–‘í•œ êµ¬ì„± ìš”ì†Œì˜ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ & ì „ì²´ ì‹œìŠ¤í…œì„ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¡œ ë§Œë“¤ê¸° ìœ„í•´ ì‘ë™

<br>

### 2. Node Controller

- ë…¸ë“œì˜ ìƒíƒœ ëª¨ë‹ˆí„°ë§í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê³„ì† ì‘ë™í•  ìˆ˜ ìˆë„ë¡ í•„ìš”í•œ ì¡°ì¹˜ ì·¨í•¨
1. ë…¸ë“œ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” `kube-apiserver`ë¥¼ í†µí•´ 5ì´ˆë§ˆë‹¤ ë…¸ë“œ ìƒíƒœ í™•ì¸
2. ë§Œì¼ ë…¸ë“œë¡œë¶€í„° í•˜íŠ¸ë¹„íŠ¸ ìˆ˜ì‹ ì„ ì¤‘ì§€í•˜ëŠ” ê²½ìš°, ë…¸ë“œëŠ” 'unreachable'ë¡œ í‘œì‹œë¨
3. í•˜ì§€ë§Œ 'unreachable' ë¡œ í‘œì‹œí•˜ê¸° ì „, 40ì´ˆë¥¼ ê¸°ë‹¤ë¦¼
4. ë…¸ë“œê°€ 'unreachable'ë¡œ í‘œì‹œëœ í›„, 5ë¶„ë™ì•ˆ ë…¸ë“œë¥¼ ë‹¤ì‹œ ë³µêµ¬í•  ì‹œê°„ì„ ì œê³µ
5. í•˜ì§€ë§Œ ë…¸ë“œê°€ ë³µêµ¬ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´, í•´ë‹¹ ë…¸ë“œì— í• ë‹¹ëœ íŒŒë“œ ì‚­ì œ í›„ ì •ìƒ ë…¸ë“œì— í”„ë¡œë¹„ì €ë‹í•¨ (ë§Œì¼ íŒŒë“œê°€ ë ˆí”Œë¦¬ì¹´ì…‹ì˜ ì¼ë¶€ì¸ ê²½ìš°)

![node-controller](https://github.com/kodekloudhub/certified-kubernetes-administrator-course/raw/master/images/node-controller.PNG)

<br>

### 3. Replication Controller

- ë ˆí”Œë¦¬ì¹´ì…‹ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§ ë° ë ˆí”Œë¦¬ì¹´ì…‹ ë‚´ì—ì„œ ì •ì˜ëœ íŒŒë“œì˜ ìˆ˜ê°€ í•­ìƒ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸
- ë§Œì¼ íŒŒë“œê°€ ì£½ì€ ê²½ìš°, ìƒˆë¡œìš´ íŒŒë“œ ìƒì„±

![replication-controller](https://github.com/kodekloudhub/certified-kubernetes-administrator-course/raw/master/images/replication-controller.PNG)

<br>

### 4. Other Controllers

- ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ë°°í¬, ì„œë¹„ìŠ¤, ë„¤ì„ìŠ¤í˜ì´ìŠ¤, í¼ì‹œìŠ¤í„´íŠ¸ ë³¼ë¥¨ ë° ë‚´ì¥ëœ ëª¨ë“  ìš”ì†ŒëŠ” ë‹¤ì–‘í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ êµ¬í˜„ë¨
- ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” kubernetes controller manager ë¼ëŠ” ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ì— íŒ¨í‚¤ì§€í™” ë˜ì–´ ìˆìŒ

![other-controllers](https://github.com/kodekloudhub/certified-kubernetes-administrator-course/raw/master/images/other-controllers.PNG)

<br>

### 5. kube controller manager ì„¤ì¹˜

- kube-controller-manager ì„¤ì¹˜í•˜ë©´ ë‹¤ë¥¸ ì»¨íŠ¸ë¡¤ëŸ¬ë„ í•¨ê»˜ ì„¤ì¹˜ë¨

```
$ wget https://storage.googleapis.com/kubernetes-release/release/v1.13.0/bin/linux/amd64/kube-controller-manager
```

<br>

- `controllers` ì˜µì…˜: í™œì„±í™”í•  ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§€ì •í•˜ëŠ”ë° ì‚¬ìš©
  - ë””í´íŠ¸ë¡œ ëª¨ë‘ í™œì„±í™”ë˜ì–´ ìˆìŒ / ì¼ë¶€ë§Œ í™œì„±í™”í•˜ë„ë¡ ì„ íƒí•  ìˆ˜ ìˆìŒ
  - ì»¨íŠ¸ë¡¤ëŸ¬ ì¤‘ í•˜ë‚˜ê°€ ì‘ë™í•˜ì§€ ì•Šê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° í™•ì¸

```
$ cat /etc/systemd/system/kube-controller-manager.service
```

![kube-controller-manager](https://github.com/kodekloudhub/certified-kubernetes-administrator-course/raw/master/images/kube-controller-manager.PNG)

<br>

### 6. kube-controller-manager ì„œë²„ ì˜µì…˜ ë³´ê¸°

ğŸŒµ í´ëŸ¬ìŠ¤í„° ì„¤ì • ë°©ë²•ì— ë”°ë¼ ìƒì´ ğŸŒµ

1. `kubeadm`ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ì„¤ì •í•œ ê²½ìš°

- kube-controller-managerë¥¼ ë§ˆìŠ¤í„°ë…¸ë“œì˜ kube-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ì˜ íŒŒë“œë¡œ ë°°í¬

```
$ kubectl get pods -n kube-system
```

![kube-controller-manager0](https://github.com/kodekloudhub/certified-kubernetes-administrator-course/raw/master/images/kube-controller-manager0.PNG)

<br>

- `/etc/kubernetes/manifests/kube-controller-manager.yaml` ì—ì„œ ì˜µì…˜ í™•ì¸ ê°€ëŠ¥

```
$ cat /etc/kubernetes/manifests/kube-controller-manager.yaml
```

![kube-controller-manager1](https://github.com/kodekloudhub/certified-kubernetes-administrator-course/raw/master/images/kube-controller-manager1.PNG)

<br>

2. `Non-kubeadm`ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ì„¤ì •í•œ ê²½ìš°

- `kube-controller-manager.service`ì—ì„œ ì˜µì…˜ í™•ì¸ ê°€ëŠ¥

```
$ cat /etc/systemd/system/kube-controller-manager.service
```

![kube-controller-manager2](https://github.com/kodekloudhub/certified-kubernetes-administrator-course/raw/master/images/kube-controller-manager2.PNG)

<br>

- ë§ˆìŠ¤í„°ë…¸ë“œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‚˜ì—´í•˜ê³  kube-apiserverë¥¼ ê²€ìƒ‰í•˜ì—¬ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ì™€ ì˜µì…˜ í™•ì¸ ê°€ëŠ¥

```
$ ps -aux | grep kube-apiserver
```

![kube-apiserver4](https://github.com/kodekloudhub/certified-kubernetes-administrator-course/raw/master/images/kube-apiserver4.PNG)

<br>

<br>

ì¶œì²˜: ë„ì»¤/ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í™œìš©í•œ ì»¨í…Œì´ë„ˆ ê°œë°œ ì‹¤ì „ ì…ë¬¸ & Certified Kubernetes Administrator (CKA) with Practice Tests ê°•ì˜
